(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{26:function(t,e,n){"use strict";n.r(e);var o=n(0),r=n.n(o),i=n(25),c=n.n(i),a=n(5),u=n(22),l=n(13),f=n(14),s=n(48);function p(t){return(p="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function y(t,e){return(y=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function h(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function b(t,e){return!e||"object"!==p(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function d(t){return(d=Object.getPrototypeOf||function(t){return t.__proto__})(t)}var m=function(t){function e(){var t,n,o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var i=arguments.length,c=new Array(i),a=0;a<i;a++)c[a]=arguments[a];return b(o,(n=o=b(this,(t=d(e)).call.apply(t,[this].concat(c))),o.displayGists=function(){var t=o.props.gists.data;return t.length?t.map(function(t){return r.a.createElement("a",{href:t.url,key:t.id},t.description)}):r.a.createElement("div",null,"no gists")},n))}var n,o,i;return n=e,(o=[{key:"render",value:function(){return r.a.createElement("div",{className:"gists-list"},this.displayGists())}}])&&h(n.prototype,o),i&&h(n,i),function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");y(t.prototype,e&&e.prototype),e&&y(t,e)}(e,t),e}(o.Component),g=Object(a.b)(function(t){return{gists:t.gists}},function(t){return{}})(m);function v(t){return(v="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function E(t,e){return(E=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function w(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function S(t,e){return!e||"object"!==v(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function _(t){return(_=Object.getPrototypeOf||function(t){return t.__proto__})(t)}var O=function(t){function e(){var t,n,o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return S(o,(n=o=S(this,(t=_(e)).call.apply(t,[this].concat(i))),o.displayGists=function(t){t.preventDefault()},n))}var n,o,i;return n=e,(o=[{key:"render",value:function(){return r.a.createElement("div",null,"no gist")}}])&&w(n.prototype,o),i&&w(n,i),function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");E(t.prototype,e&&e.prototype),e&&E(t,e)}(e,t),e}(o.Component),j=Object(a.b)()(O),C=n(10),T=n.n(C);function k(t){return(k="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function P(t,e){return(P=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function F(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function R(t,e){return!e||"object"!==k(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function U(t){return(U=Object.getPrototypeOf||function(t){return t.__proto__})(t)}var A=function(t){function e(){var t,n,o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return R(o,(n=o=R(this,(t=U(e)).call.apply(t,[this].concat(i))),o.requestAccess=function(){var t=T.a.parse(window.location.search),e=T.a.stringify({code:t.code}),n="http://localhost:3000/callback?".concat(e);fetch(n).then(function(t){return t.json()}).then(function(t){console.log(t);var e=t.token,n=e.access_token;e.error?console.log(t.token.error_description):localStorage.setItem("ghtoken",n)})},o.getCodeFromGh=function(){var t=T.a.stringify({client_id:"169a193bbe75c0e129d0",scope:"gist"}),e="https://github.com/login/oauth/authorize?".concat(t);window.location.href=e},n))}var n,o,i;return n=e,(o=[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return r.a.createElement("div",null,"login!",r.a.createElement("button",{onClick:this.getCodeFromGh},"to gh"),r.a.createElement("button",{onClick:this.requestAccess},"request access"))}}])&&F(n.prototype,o),i&&F(n,i),function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");P(t.prototype,e&&e.prototype),e&&P(t,e)}(e,t),e}(o.Component);function I(t){this.name="Error",this.status=t.status,this.message=t.statusText,this.url=t.url}I.prototype=Object.create(Error.prototype),I.prototype.constructor=I;var G=localStorage.getItem("ghtoken");console.log(G);var H,x=(H={method:"GET",headers:{Authorization:"token ".concat(G)}},function(t){return function(){return console.log(H,t),fetch(function(t){return"".concat("https://api.github.com").concat(t)}(t),H).then(function(t){if(t.ok)return t.json();throw new I(t)})}}),D=x("/user"),L=x("/gists");function N(t){return(N="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Q(t,e){return(Q=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function W(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function q(t,e){return!e||"object"!==N(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function M(t){return(M=Object.getPrototypeOf||function(t){return t.__proto__})(t)}var z=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),q(this,M(e).apply(this,arguments))}var n,o,i;return n=e,(o=[{key:"componentDidMount",value:function(){this.props.onFetchData()}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("button",{onClick:this.props.onFetchData},"sync"))}}])&&W(n.prototype,o),i&&W(n,i),function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");Q(t.prototype,e&&e.prototype),e&&Q(t,e)}(e,t),e}(o.Component),B=Object(a.b)(null,function(t){return{onFetchData:function(){!function(t){t({type:"FETCH_USER_REQUEST"}),D().then(function(e){return t({type:"FETCH_USER_SUCCESS",payload:e})}).catch(function(e){return t(function(t){return{type:"FETCH_USER_FAILURE",payload:t}}(e))})}(t),function(t){t({type:"FETCH_GISTS_REQUEST"}),L().then(function(e){return t({type:"FETCH_GISTS_SUCCESS",payload:e})}).catch(function(e){return t(function(t){return{type:"FETCH_GISTS_FAILURE",payload:t}}(e))})}(t)}}})(z);function J(t){return(J="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function X(t,e){return(X=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function V(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function $(t,e){return!e||"object"!==J(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function K(t){return(K=Object.getPrototypeOf||function(t){return t.__proto__})(t)}var Y=function(t){function e(){var t,n,o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var i=arguments.length,c=new Array(i),a=0;a<i;a++)c[a]=arguments[a];return $(o,(n=o=$(this,(t=K(e)).call.apply(t,[this].concat(c))),o.isAuthenticated=!1,o.chooseStartPage=function(t){return o.isAuthenticated?r.a.createElement(j,null):(console.log("should redirect"),r.a.createElement(j,null))},n))}var n,o,i;return n=e,(o=[{key:"render",value:function(){return r.a.createElement(s.a,null,r.a.createElement("div",{className:"app"},r.a.createElement("header",null,r.a.createElement("nav",null,r.a.createElement(f.a,{to:"/"},"home"),r.a.createElement(f.a,{to:"/gist"},"gist"),r.a.createElement(f.a,{to:"/login"},"login")),r.a.createElement(B,null)),r.a.createElement("aside",null,r.a.createElement(g,null)),r.a.createElement("main",null,r.a.createElement(l.a,{exact:!0,path:"/",render:this.chooseStartPage}),r.a.createElement(l.a,{exact:!0,path:"/login",component:A}),r.a.createElement(l.a,{exact:!0,path:"/gist",component:j})),r.a.createElement("footer",null,"footer")))}}])&&V(n.prototype,o),i&&V(n,i),function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");X(t.prototype,e&&e.prototype),e&&X(t,e)}(e,t),e}(o.Component),Z=(n(28),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)));function tt(t){navigator.serviceWorker.register(t).then(function(t){t.onupdatefound=function(){var e=t.installing;e.onstatechange=function(){"installed"===e.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(t){console.error("Error during service worker registration:",t)})}var et=n(6),nt=n(11),ot=n(20),rt=n.n(ot),it=n(19);function ct(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},o=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),o.forEach(function(e){at(t,e,n[e])})}return t}function at(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var ut={pending:!1,data:{},error:""};function lt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},o=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),o.forEach(function(e){ft(t,e,n[e])})}return t}function ft(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var st={pending:!1,data:{},error:""},pt=Object(et.c)({gists:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ut,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"FETCH_GISTS_REQUEST":return ct({},t,{pending:!0});case"FETCH_GISTS_SUCCESS":return ct({},t,{pending:!1,data:e.payload,error:ut.error});case"FETCH_GISTS_FAILURE":return ct({},t,{pending:!1,data:ut.data,error:e.payload});default:return t}},user:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:st,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"FETCH_USER_REQUEST":return lt({},t,{pending:!0});case"FETCH_USER_SUCCESS":return lt({},t,{pending:!1,data:e.payload,error:st.error});case"FETCH_USER_FAILURE":return lt({},t,{pending:!1,data:st.data,error:e.payload});default:return t}}}),yt={key:"root",storage:rt.a},ht=Object(nt.a)(yt,pt),bt=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||et.d,dt=Object(et.e)(ht,bt(Object(et.a)(it.a))),mt=Object(nt.b)(dt);c.a.render(r.a.createElement(a.a,{store:dt},r.a.createElement(u.a,{loading:null,persistor:mt},r.a.createElement(Y,null))),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/gist",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("/gist","/service-worker.js");Z?(function(t){fetch(t).then(function(e){404===e.status||-1===e.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(t){t.unregister().then(function(){window.location.reload()})}):tt(t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):tt(t)})}}()},28:function(t,e,n){},47:function(t,e,n){n(46),t.exports=n(26)}},[[47,0,1]]]);
//# sourceMappingURL=main.678fb4d1.chunk.js.map