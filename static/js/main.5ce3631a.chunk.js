(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{25:function(t,e,n){"use strict";n.r(e);var r=n(0),o=n.n(r),i=n(24),a=n.n(i),c=n(4),u=n(21),l=n(49),f=n(50),s=function(t){return function(e){e({type:"FETCH_GIST_FILE_REQUEST",payload:{name:t.file.filename,id:t.id}}),fetch(t.file.raw_url).then(function(t){return t.text()}).then(function(n){e(function(t){return{type:"FETCH_GIST_FILE_SUCCESS",payload:t}}({id:t.id,name:t.file.filename,data:n}))}).catch(function(t){return e(function(t){return{type:"FETCH_GIST_FILE_FAILURE",payload:t}}(t))})}};function p(t){return(p="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function y(t,e){return(y=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function d(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function h(t,e){return!e||"object"!==p(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function b(t){return(b=Object.getPrototypeOf||function(t){return t.__proto__})(t)}var g=function(t){function e(){var t,n,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var i=arguments.length,a=new Array(i),c=0;c<i;c++)a[c]=arguments[c];return h(r,(n=r=h(this,(t=b(e)).call.apply(t,[this].concat(a))),r.displayGists=function(){var t=r.props.gists.data;return t.length?t.map(function(t){return o.a.createElement("button",{onClick:r.props.setGist(t.id),key:t.id},t.description)}):o.a.createElement("div",null,"no gists")},n))}var n,r,i;return n=e,(r=[{key:"render",value:function(){return o.a.createElement("div",{className:"gists-list"},this.displayGists())}}])&&d(n.prototype,r),i&&d(n,i),function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");y(t.prototype,e&&e.prototype),e&&y(t,e)}(e,t),e}(r.Component),m=Object(c.b)(function(t){return{gists:t.gists}},function(t){return{setGist:function(e){return function(n){n.preventDefault(),t(function(t){return{type:"SET_ACTIVE_GIST",payload:t}}(e))}},loadGistFiles:function(t){}}})(g),E=n(20),v=n.n(E),_=n(10),S=n.n(_),w=function(t){var e=t.gist,n=t.updateGist,r=t.changeFileData,i=t.getFileData;return o.a.createElement("div",null,o.a.createElement("h3",null,e.description),o.a.createElement("div",null,Object.keys(e.files).map(function(t){return function(t){var n=e.files[t],a=n.language?n.language.toLowerCase():"clike",c=S.a.languages.hasOwnProperty(a)?a:"clike";return o.a.createElement("div",{key:t,className:"gist"},o.a.createElement("h3",null,t),o.a.createElement(v.a,{className:"gist-editor",value:i(t),onValueChange:r(t),highlight:function(t){return S.a.highlight(t,S.a.languages[c])},padding:10,style:{fontFamily:'"Fira code", "Fira Mono", monospace',fontSize:14}}))}(t)})),o.a.createElement("button",{onClick:n(e)},"Submit"))};function O(t){return(O="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function T(t,e){return(T=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function C(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function j(t,e){return!e||"object"!==O(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function k(t){return(k=Object.getPrototypeOf||function(t){return t.__proto__})(t)}var F=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=j(this,k(e).call(this,t))).displayGist=function(){var t=n.props.gists;return t.active?(n.gist=t.data.find(function(e){return e.id===t.active}),o.a.createElement(w,{gist:n.gist,updateGist:n.props.onUpdateGist,changeFileData:n.changeFileData,changeCode:n.changeCode,getFileData:n.getFileData})):"no active gist"},n.getFileData=function(t){return n.gist.files[t].data},n.changeFileData=function(t){return function(e){n.setState({code:e}),n.gist.files[t].data=e}},n.handleKeyboard=function(t){if(t.ctrlKey||t.metaKey)switch(String.fromCharCode(t.which).toLowerCase()){case"s":n.gist&&n.props.onUpdateGist(n.gist)(t)}},n.state={code:""},n}var n,r,i;return n=e,(r=[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeyboard)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKeyboard)}},{key:"render",value:function(){return o.a.createElement("div",null,this.displayGist())}}])&&C(n.prototype,r),i&&C(n,i),function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");T(t.prototype,e&&e.prototype),e&&T(t,e)}(e,t),e}(r.Component),I=Object(c.b)(function(t){return{gists:t.gists}},function(t){return{loadFile:function(e){return function(n){t(s(e))}},onUpdateGist:function(e){return function(n){n&&n.preventDefault(),t(function(t){return{type:"UPDATE_GIST",payload:t}}(e))}}}})(F),U=n(9),G=n.n(U),P=function(){var t=window.location.origin+window.location.pathname,e=G.a.stringify({client_id:"169a193bbe75c0e129d0",scope:"gist",redirect_uri:t}),n="https://github.com/login/oauth/authorize?".concat(e);window.location.href=n};function R(t){return(R="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function H(t,e){return(H=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function L(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function D(t,e){return!e||"object"!==R(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function A(t){return(A=Object.getPrototypeOf||function(t){return t.__proto__})(t)}var N=function(t){function e(){var t,n,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return D(r,(n=r=D(this,(t=A(e)).call.apply(t,[this].concat(i))),r.loading=function(){if(r.props.login.pending)return"loading..."},n))}var n,r,i;return n=e,(r=[{key:"componentDidMount",value:function(){var t=this.props,e=t.login,n=t.onFetchToken;e.isAuth||n()}},{key:"render",value:function(){var t=this.props.user.data;return o.a.createElement("div",{className:"header-user"},o.a.createElement("a",{href:t.html_url,className:"header-user-name"},o.a.createElement("img",{src:t.avatar_url,alt:"",className:"header-user-img"}),t.login),this.loading(),o.a.createElement("button",{onClick:P},"Login"),o.a.createElement("button",{onClick:this.props.onLogout},"Logout"))}}])&&L(n.prototype,r),i&&L(n,i),function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");H(t.prototype,e&&e.prototype),e&&H(t,e)}(e,t),e}(r.Component),x=Object(c.b)(function(t){return{login:t.login,user:t.user}},function(t){return{onFetchToken:function(){!function(t){var e=G.a.parse(window.location.search);if(e.code){var n=G.a.stringify({code:e.code}),r="https://server-aenjidvwww.now.sh/callback?".concat(n);t({type:"FETCH_GH_TOKEN_REQUEST"}),fetch(r).then(function(t){return t.json()}).then(function(e){var n=e.token,r=n.access_token,o=n.error;o?t(function(t){return{type:"FETCH_GH_TOKEN_ERROR",payload:t,error:!0}}(o)):(localStorage.setItem("ghtoken",r),t({type:"FETCH_GH_TOKEN_SUCCESS",payload:r}))})}}(t)},onLogout:function(){t((localStorage.removeItem("ghtoken"),{type:"LOGOUT"}))}}})(N);function K(t){this.name="Error",this.status=t.status,this.message=t.statusText,this.url=t.url}K.prototype=Object.create(Error.prototype),K.prototype.constructor=K;var Q,W=(Q="GET",function(t){return function(e){return e=e||function(t){return"".concat("https://api.github.com").concat(t)}(t),fetch(e,{method:Q,headers:{Authorization:"token ".concat(localStorage.getItem("ghtoken"))}}).then(function(t){if(t.ok)return t.json();throw new K(t)})}}),M=W("/user"),V=W("/gists"),z=function(t){return function(e){t.forEach(function(t){e(function(t){return function(e){Object.keys(t.files).forEach(function(n){e(s({id:t.id,file:t.files[n]}))})}}(t))})}};function B(t){return(B="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function J(t,e){return(J=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function X(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function $(t,e){return!e||"object"!==B(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function q(t){return(q=Object.getPrototypeOf||function(t){return t.__proto__})(t)}var Y=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),$(this,q(e).apply(this,arguments))}var n,r,i;return n=e,(r=[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("button",{onClick:this.props.onFetchData},"sync"))}}])&&X(n.prototype,r),i&&X(n,i),function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");J(t.prototype,e&&e.prototype),e&&J(t,e)}(e,t),e}(r.Component),Z=Object(c.b)(null,function(t){return{onFetchData:function(){!function(t){t({type:"FETCH_USER_REQUEST"}),M().then(function(e){return t({type:"FETCH_USER_SUCCESS",payload:e})}).catch(function(e){return t(function(t){return{type:"FETCH_USER_FAILURE",payload:t}}(e))})}(t),function(t){t({type:"FETCH_GISTS_REQUEST"}),V().then(function(e){t(function(t){return{type:"FETCH_GISTS_SUCCESS",payload:t}}(e)),t(z(e))}).catch(function(e){return console.log(e),t(function(t){return{type:"FETCH_GISTS_FAILURE",payload:t}}(e))})}(t)}}})(Y);function tt(t){return(tt="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function et(t,e){return(et=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function nt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function rt(t,e){return!e||"object"!==tt(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ot(t){return(ot=Object.getPrototypeOf||function(t){return t.__proto__})(t)}var it=function(t){function e(){var t,n,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return rt(r,(n=r=rt(this,(t=ot(e)).call.apply(t,[this].concat(i))),r.isAuthenticated=!1,n))}var n,r,i;return n=e,(r=[{key:"render",value:function(){return o.a.createElement(f.a,{basename:"/gist"},o.a.createElement("div",{className:"app"},o.a.createElement("header",{className:"header"},o.a.createElement(Z,null),o.a.createElement(x,null)),o.a.createElement("aside",null,o.a.createElement(m,null)),o.a.createElement("main",null,o.a.createElement(l.a,{exact:!0,path:"/",component:I})),o.a.createElement("footer",null,"footer")))}}])&&nt(n.prototype,r),i&&nt(n,i),function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");et(t.prototype,e&&e.prototype),e&&et(t,e)}(e,t),e}(r.Component),at=(n(29),n(27),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)));function ct(t){navigator.serviceWorker.register(t).then(function(t){t.onupdatefound=function(){var e=t.installing;e.onstatechange=function(){"installed"===e.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(t){console.error("Error during service worker registration:",t)})}var ut=n(6),lt=n(11),ft=n(18),st=n.n(ft),pt=n(17);function yt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){dt(t,e,n[e])})}return t}function dt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var ht;function bt(t,e){return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t,r=arguments.length>1?arguments[1]:void 0;return e.hasOwnProperty(r.type)?e[r.type](n,r):n}}function gt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){mt(t,e,n[e])})}return t}function mt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Et={pending:!1,data:{},error:""},vt=bt(Et,(mt(ht={},"FETCH_GISTS_REQUEST",function(t){return gt({},t,{pending:!0})}),mt(ht,"FETCH_GISTS_SUCCESS",function(t,e){return gt({},t,{pending:!1,data:e.payload,error:Et.error})}),mt(ht,"FETCH_GISTS_FAILURE",function(t,e){return gt({},t,{pending:!1,error:e.payload})}),mt(ht,"SET_ACTIVE_GIST",function(t,e){return yt({},t,{active:e.payload})}),mt(ht,"FETCH_GIST_FILE_REQUEST",function(t,e){var n=e.payload,r=n.name,o=n.id,i=yt({},t),a=i.data.findIndex(function(t){return t.id===o});return i.data[a].files[r].pending=!0,i}),mt(ht,"FETCH_GIST_FILE_SUCCESS",function(t,e){var n=e.payload,r=n.id,o=n.name,i=n.data,a=yt({},t),c=a.data.findIndex(function(t){return t.id===r}),u=a.data[c].files[o];return u.pending=!1,u.data=i,a}),mt(ht,"FETCH_GIST_FILE_FAILURE",function(t,e){return t}),mt(ht,"UPDATE_GIST",function(t,e){var n=yt({},t),r=e.payload,o=t.data.findIndex(function(t){return t.id===r.id});return n.data[o]=r,n}),ht));function _t(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){St(t,e,n[e])})}return t}function St(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var wt,Ot={pending:!1,data:{},error:""};function Tt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){Ct(t,e,n[e])})}return t}function Ct(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var jt={pending:!1,token:"",error:{},isAuth:!1},kt=bt(jt,(Ct(wt={},"FETCH_GH_TOKEN_REQUEST",function(t){return Tt({},t,{pending:!0})}),Ct(wt,"FETCH_GH_TOKEN_SUCCESS",function(t,e){return{pending:!1,token:e.payload,error:jt.error,isAuth:!0}}),Ct(wt,"FETCH_GH_TOKEN_ERROR",function(t,e){return Tt({},t,{pending:!1,error:e.payload})}),Ct(wt,"LOGOUT",function(t){return Tt({},t,{token:jt.token,isAuth:!1})}),wt)),Ft=Object(ut.c)({gists:vt,user:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ot,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"FETCH_USER_REQUEST":return _t({},t,{pending:!0});case"FETCH_USER_SUCCESS":return _t({},t,{pending:!1,data:e.payload,error:Ot.error});case"FETCH_USER_FAILURE":return _t({},t,{pending:!1,data:Ot.data,error:e.payload});default:return t}},login:kt}),It={key:"root",storage:st.a},Ut=Object(lt.a)(It,Ft),Gt=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||ut.d,Pt=Object(ut.e)(Ut,Gt(Object(ut.a)(pt.a))),Rt=Object(lt.b)(Pt);a.a.render(o.a.createElement(c.a,{store:Pt},o.a.createElement(u.a,{loading:null,persistor:Rt},o.a.createElement(it,null))),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/gist",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("/gist","/service-worker.js");at?(function(t){fetch(t).then(function(e){404===e.status||-1===e.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(t){t.unregister().then(function(){window.location.reload()})}):ct(t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):ct(t)})}}()},29:function(t,e,n){},48:function(t,e,n){n(47),t.exports=n(25)}},[[48,0,1]]]);
//# sourceMappingURL=main.5ce3631a.chunk.js.map