(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{25:function(t,n,e){"use strict";e.r(n);var r=e(0),o=e.n(r),i=e(24),a=e.n(i),c=e(4),u=e(21),l=e(49),f=e(50),s=function(t){return function(n){n({type:"FETCH_GIST_FILE_REQUEST",payload:{name:t.file.filename,id:t.id}}),fetch(t.file.raw_url).then(function(t){return t.text()}).then(function(e){n(function(t){return{type:"FETCH_GIST_FILE_SUCCESS",payload:t}}({id:t.id,name:t.file.filename,data:e}))}).catch(function(t){return n(function(t){return{type:"FETCH_GIST_FILE_FAILURE",payload:t}}(t))})}};function p(t){return(p="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function y(t,n){return(y=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}function d(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function h(t,n){return!n||"object"!==p(n)&&"function"!==typeof n?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):n}function g(t){return(g=Object.getPrototypeOf||function(t){return t.__proto__})(t)}var b=function(t){function n(){var t,e,r;!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n);for(var i=arguments.length,a=new Array(i),c=0;c<i;c++)a[c]=arguments[c];return h(r,(e=r=h(this,(t=g(n)).call.apply(t,[this].concat(a))),r.displayGists=function(){var t=r.props.gists.data;return t.length?t.map(function(t){return o.a.createElement("button",{onClick:r.props.setGist(t.id),key:t.id},t.description)}):o.a.createElement("div",null,"no gists")},e))}var e,r,i;return e=n,(r=[{key:"render",value:function(){return o.a.createElement("div",{className:"gists-list"},this.displayGists())}}])&&d(e.prototype,r),i&&d(e,i),function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");y(t.prototype,n&&n.prototype),n&&y(t,n)}(n,t),n}(r.Component),m=Object(c.b)(function(t){return{gists:t.gists}},function(t){return{setGist:function(n){return function(e){e.preventDefault(),t(function(t){return{type:"SET_ACTIVE_GIST",payload:t}}(n))}},loadGistFiles:function(t){}}})(b),E=e(20),_=e.n(E),v=e(10),S=e.n(v),w=function(t){var n=t.gist,e=t.updateGist,r=t.changeFileData,i=t.getFileData;return o.a.createElement("div",null,o.a.createElement("h3",null,n.description),o.a.createElement("div",null,Object.keys(n.files).map(function(t){return function(t){var e=n.files[t],a=e.language?e.language.toLowerCase():"clike",c=S.a.languages.hasOwnProperty(a)?a:"clike",u=i(t)||"";return o.a.createElement("div",{key:t,className:"gist"},o.a.createElement("h3",null,t),o.a.createElement(_.a,{className:"gist-editor",value:u,onValueChange:r(t),highlight:function(t){return S.a.highlight(t,S.a.languages[c])},padding:10,style:{fontFamily:'"Fira code", "Fira Mono", monospace',fontSize:14}}))}(t)})),o.a.createElement("button",{onClick:e(n)},"Submit"))};function T(t){return(T="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function O(t,n){return(O=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}function C(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function j(t,n){return!n||"object"!==T(n)&&"function"!==typeof n?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):n}function k(t){return(k=Object.getPrototypeOf||function(t){return t.__proto__})(t)}var F=function(t){function n(t){var e;return function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n),(e=j(this,k(n).call(this,t))).displayGist=function(){var t=e.props.gists;return t.active?(e.gist=t.data.find(function(n){return n.id===t.active}),o.a.createElement(w,{gist:e.gist,updateGist:e.props.onUpdateGist,changeFileData:e.changeFileData,changeCode:e.changeCode,getFileData:e.getFileData})):"no active gist"},e.getFileData=function(t){return e.gist.files[t].content},e.changeFileData=function(t){return function(n){e.setState({code:n}),e.gist.files[t].content=n}},e.handleKeyboard=function(t){if(t.ctrlKey||t.metaKey)switch(String.fromCharCode(t.which).toLowerCase()){case"s":e.gist&&e.props.onUpdateGist(e.gist)(t)}},e.state={code:""},e}var e,r,i;return e=n,(r=[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeyboard)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKeyboard)}},{key:"render",value:function(){return o.a.createElement("div",null,this.displayGist())}}])&&C(e.prototype,r),i&&C(e,i),function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");O(t.prototype,n&&n.prototype),n&&O(t,n)}(n,t),n}(r.Component),G=Object(c.b)(function(t){return{gists:t.gists}},function(t){return{loadFile:function(n){return function(e){t(s(n))}},onUpdateGist:function(n){return function(e){e&&e.preventDefault(),t(function(t){return{type:"CHANGE_GIST",payload:t}}(n))}}}})(F),I=e(9),U=e.n(I),P=function(){var t=window.location.origin+window.location.pathname,n=U.a.stringify({client_id:"169a193bbe75c0e129d0",scope:"gist",redirect_uri:t}),e="https://github.com/login/oauth/authorize?".concat(n);window.location.href=e};function R(t){return(R="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function H(t,n){return(H=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}function A(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function D(t,n){return!n||"object"!==R(n)&&"function"!==typeof n?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):n}function L(t){return(L=Object.getPrototypeOf||function(t){return t.__proto__})(t)}var N=function(t){function n(){var t,e,r;!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return D(r,(e=r=D(this,(t=L(n)).call.apply(t,[this].concat(i))),r.loading=function(){if(r.props.login.pending)return"loading..."},e))}var e,r,i;return e=n,(r=[{key:"componentDidMount",value:function(){var t=this.props,n=t.login,e=t.onFetchToken;n.isAuth||e()}},{key:"render",value:function(){var t=this.props.user.data;return o.a.createElement("div",{className:"header-user"},o.a.createElement("a",{href:t.html_url,className:"header-user-name"},o.a.createElement("img",{src:t.avatar_url,alt:"",className:"header-user-img"}),t.login),this.loading(),o.a.createElement("button",{onClick:P},"Login"),o.a.createElement("button",{onClick:this.props.onLogout},"Logout"))}}])&&A(e.prototype,r),i&&A(e,i),function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");H(t.prototype,n&&n.prototype),n&&H(t,n)}(n,t),n}(r.Component),x=Object(c.b)(function(t){return{login:t.login,user:t.user}},function(t){return{onFetchToken:function(){!function(t){var n=U.a.parse(window.location.search);if(n.code){var e=U.a.stringify({code:n.code}),r="https://server-aenjidvwww.now.sh/callback?".concat(e);t({type:"FETCH_GH_TOKEN_REQUEST"}),fetch(r).then(function(t){return t.json()}).then(function(n){var e=n.token,r=e.access_token,o=e.error;o?t(function(t){return{type:"FETCH_GH_TOKEN_ERROR",payload:t,error:!0}}(o)):(localStorage.setItem("ghtoken",r),t({type:"FETCH_GH_TOKEN_SUCCESS",payload:r}))})}}(t)},onLogout:function(){t((localStorage.removeItem("ghtoken"),{type:"LOGOUT"}))}}})(N),K=function(t){return"".concat("https://api.github.com").concat(t)},Q={Authorization:"token ".concat(localStorage.getItem("ghtoken"))},W=function(t){if(t.ok)return t.json();throw new M(t)};function M(t){this.name="Error",this.status=t.status,this.message=t.statusText,this.url=t.url}M.prototype=Object.create(Error.prototype),M.prototype.constructor=M;var V,z=(V="GET",function(t){return function(n){return n=n||K(t),fetch(n,{method:V,headers:Q}).then(W)}}),J=z("/user"),B=z("/gists"),X=function(t){return function(n){return function(e){return fetch(K(n),{method:t,headers:Q,body:JSON.stringify(e)}).then(W)}}}("PATCH"),$=function(t){return function(n){t.forEach(function(t){n(function(t){return function(n){Object.keys(t.files).forEach(function(e){n(s({id:t.id,file:t.files[e]}))})}}(t))})}},q=function(t){return function(n){console.log("updateGists");var e=t.data.filter(function(t){return t.changed});return e.forEach(function(t){n({type:"UPDATE_GISTS_START"}),function(t){return X("/gists/".concat(t.id))(t)}(t).then(function(t){n(function(t){return{type:"UPDATE_GIST_SUCCESS",payload:t}}(t))}).catch(function(t){n({type:"UPDATE_GIST_ERROR",payload:t})}).finally(function(t){n({type:"UPDATE_GISTS_FINISH"})})}),e}};function Y(t){return(Y="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Z(t,n){return(Z=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}function tt(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function nt(t,n){return!n||"object"!==Y(n)&&"function"!==typeof n?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):n}function et(t){return(et=Object.getPrototypeOf||function(t){return t.__proto__})(t)}var rt=function(t){function n(){return function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n),nt(this,et(n).apply(this,arguments))}var e,r,i;return e=n,(r=[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("button",{onClick:this.props.onFetchData},"pull"),o.a.createElement("button",{onClick:this.props.onUpdateGists(this.props.gists)},"push"),this.props.gists.patching?"updating gists on github":"")}}])&&tt(e.prototype,r),i&&tt(e,i),function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");Z(t.prototype,n&&n.prototype),n&&Z(t,n)}(n,t),n}(r.Component),ot=Object(c.b)(function(t){return{gists:t.gists}},function(t){return{onFetchData:function(){!function(t){t({type:"FETCH_USER_REQUEST"}),J().then(function(n){return t({type:"FETCH_USER_SUCCESS",payload:n})}).catch(function(n){return t(function(t){return{type:"FETCH_USER_FAILURE",payload:t}}(n))})}(t),function(t){t({type:"FETCH_GISTS_REQUEST"}),B().then(function(n){t(function(t){return{type:"FETCH_GISTS_SUCCESS",payload:t}}(n)),t($(n))}).catch(function(n){return console.log(n),t(function(t){return{type:"FETCH_GISTS_FAILURE",payload:t}}(n))})}(t)},onUpdateGists:function(n){return function(){t(q(n))}}}})(rt);function it(t){return(it="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function at(t,n){return(at=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}function ct(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ut(t,n){return!n||"object"!==it(n)&&"function"!==typeof n?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):n}function lt(t){return(lt=Object.getPrototypeOf||function(t){return t.__proto__})(t)}var ft=function(t){function n(){var t,e,r;!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return ut(r,(e=r=ut(this,(t=lt(n)).call.apply(t,[this].concat(i))),r.isAuthenticated=!1,e))}var e,r,i;return e=n,(r=[{key:"render",value:function(){return o.a.createElement(f.a,{basename:"/gist"},o.a.createElement("div",{className:"app"},o.a.createElement("header",{className:"header"},o.a.createElement(ot,null),o.a.createElement(x,null)),o.a.createElement("aside",null,o.a.createElement(m,null)),o.a.createElement("main",null,o.a.createElement(l.a,{exact:!0,path:"/",component:G})),o.a.createElement("footer",null,"footer")))}}])&&ct(e.prototype,r),i&&ct(e,i),function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");at(t.prototype,n&&n.prototype),n&&at(t,n)}(n,t),n}(r.Component),st=(e(29),e(27),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)));function pt(t){navigator.serviceWorker.register(t).then(function(t){t.onupdatefound=function(){var n=t.installing;n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(t){console.error("Error during service worker registration:",t)})}var yt=e(6),dt=e(11),ht=e(18),gt=e.n(ht),bt=e(17);function mt(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{},r=Object.keys(e);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(e).filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.forEach(function(n){Et(t,n,e[n])})}return t}function Et(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}var _t;function vt(t,n){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t,r=arguments.length>1?arguments[1]:void 0;return n.hasOwnProperty(r.type)?n[r.type](e,r):e}}function St(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{},r=Object.keys(e);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(e).filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.forEach(function(n){wt(t,n,e[n])})}return t}function wt(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}var Tt={pending:!1,data:{},error:""},Ot=vt(Tt,(wt(_t={},"FETCH_GISTS_REQUEST",function(t){return St({},t,{pending:!0})}),wt(_t,"FETCH_GISTS_SUCCESS",function(t,n){return St({},t,{pending:!1,data:n.payload,error:Tt.error})}),wt(_t,"FETCH_GISTS_FAILURE",function(t,n){return St({},t,{pending:!1,error:n.payload})}),wt(_t,"SET_ACTIVE_GIST",function(t,n){return mt({},t,{active:n.payload})}),wt(_t,"FETCH_GIST_FILE_REQUEST",function(t,n){var e=n.payload,r=e.name,o=e.id,i=mt({},t),a=i.data.findIndex(function(t){return t.id===o});return i.data[a].files[r].pending=!0,i}),wt(_t,"FETCH_GIST_FILE_SUCCESS",function(t,n){var e=n.payload,r=e.id,o=e.name,i=e.data,a=mt({},t),c=a.data.findIndex(function(t){return t.id===r}),u=a.data[c].files[o];return u.pending=!1,u.content=i,a}),wt(_t,"FETCH_GIST_FILE_FAILURE",function(t,n){return t}),wt(_t,"CHANGE_GIST",function(t,n){var e=mt({},t),r=n.payload;r.changed=!0;var o=t.data.findIndex(function(t){return t.id===r.id});return e.data[o]=r,e}),wt(_t,"UPDATE_GISTS_START",function(t){return St({},t,{patching:!0})}),wt(_t,"UPDATE_GISTS_FINISH",function(t){return St({},t,{patching:!1})}),_t));function Ct(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{},r=Object.keys(e);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(e).filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.forEach(function(n){jt(t,n,e[n])})}return t}function jt(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}var kt,Ft={pending:!1,data:{},error:""};function Gt(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{},r=Object.keys(e);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(e).filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.forEach(function(n){It(t,n,e[n])})}return t}function It(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}var Ut={pending:!1,token:"",error:{},isAuth:!1},Pt=vt(Ut,(It(kt={},"FETCH_GH_TOKEN_REQUEST",function(t){return Gt({},t,{pending:!0})}),It(kt,"FETCH_GH_TOKEN_SUCCESS",function(t,n){return{pending:!1,token:n.payload,error:Ut.error,isAuth:!0}}),It(kt,"FETCH_GH_TOKEN_ERROR",function(t,n){return Gt({},t,{pending:!1,error:n.payload})}),It(kt,"LOGOUT",function(t){return Gt({},t,{token:Ut.token,isAuth:!1})}),kt)),Rt=Object(yt.c)({gists:Ot,user:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ft,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"FETCH_USER_REQUEST":return Ct({},t,{pending:!0});case"FETCH_USER_SUCCESS":return Ct({},t,{pending:!1,data:n.payload,error:Ft.error});case"FETCH_USER_FAILURE":return Ct({},t,{pending:!1,data:Ft.data,error:n.payload});default:return t}},login:Pt}),Ht={key:"root",storage:gt.a},At=Object(dt.a)(Ht,Rt),Dt=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||yt.d,Lt=Object(yt.e)(At,Dt(Object(yt.a)(bt.a))),Nt=Object(dt.b)(Lt);a.a.render(o.a.createElement(c.a,{store:Lt},o.a.createElement(u.a,{loading:null,persistor:Nt},o.a.createElement(ft,null))),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/gist",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("/gist","/service-worker.js");st?(function(t){fetch(t).then(function(n){404===n.status||-1===n.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(t){t.unregister().then(function(){window.location.reload()})}):pt(t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):pt(t)})}}()},29:function(t,n,e){},48:function(t,n,e){e(47),t.exports=e(25)}},[[48,0,1]]]);
//# sourceMappingURL=main.534d0533.chunk.js.map