(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{25:function(t,e,n){"use strict";n.r(e);var o=n(0),r=n.n(o),i=n(24),c=n.n(i),a=n(5),u=n(13),l=n(14),f=n(47);function s(t){return(s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function y(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function h(t,e){return!e||"object"!==s(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function b(t){return(b=Object.getPrototypeOf||function(t){return t.__proto__})(t)}var d=function(t){function e(){var t,n,o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var i=arguments.length,c=new Array(i),a=0;a<i;a++)c[a]=arguments[a];return h(o,(n=o=h(this,(t=b(e)).call.apply(t,[this].concat(c))),o.displayGists=function(){var t=o.props.gists.data;return t.length?t.map(function(t){return r.a.createElement("a",{href:t.url,key:t.id},t.description)}):r.a.createElement("div",null,"no gists")},n))}var n,o,i;return n=e,(o=[{key:"render",value:function(){return r.a.createElement("div",{className:"gists-list"},this.displayGists())}}])&&y(n.prototype,o),i&&y(n,i),function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");p(t.prototype,e&&e.prototype),e&&p(t,e)}(e,t),e}(o.Component),m=Object(a.b)(function(t){return{gists:t.gists}},function(t){return{}})(d);function g(t){return(g="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function v(t,e){return(v=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function E(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function w(t,e){return!e||"object"!==g(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function S(t){return(S=Object.getPrototypeOf||function(t){return t.__proto__})(t)}var _=function(t){function e(){var t,n,o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return w(o,(n=o=w(this,(t=S(e)).call.apply(t,[this].concat(i))),o.displayGists=function(t){t.preventDefault()},n))}var n,o,i;return n=e,(o=[{key:"render",value:function(){return r.a.createElement("div",null,"no gist")}}])&&E(n.prototype,o),i&&E(n,i),function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");v(t.prototype,e&&e.prototype),e&&v(t,e)}(e,t),e}(o.Component),O=Object(a.b)()(_),j=n(10),T=n.n(j);function k(t){return(k="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function C(t,e){return(C=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function P(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function R(t,e){return!e||"object"!==k(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function U(t){return(U=Object.getPrototypeOf||function(t){return t.__proto__})(t)}var F=function(t){function e(){var t,n,o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return R(o,(n=o=R(this,(t=U(e)).call.apply(t,[this].concat(i))),o.requestAccess=function(){var t=T.a.parse(window.location.search),e=T.a.stringify({code:t.code}),n="http://localhost:3000/callback?".concat(e);fetch(n).then(function(t){return t.json()}).then(function(t){console.log(t);var e=t.token,n=e.access_token;e.error?console.log(t.token.error_description):localStorage.setItem("ghtoken",n)})},n))}var n,o,i;return n=e,(o=[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var t=T.a.stringify({client_id:"169a193bbe75c0e129d0",scope:"gist"}),e="https://github.com//login/oauth/authorize?".concat(t);return r.a.createElement("div",null,"login",r.a.createElement("a",{href:e},"to github"),r.a.createElement("button",{onClick:this.requestAccess},"request access"))}}])&&P(n.prototype,o),i&&P(n,i),function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");C(t.prototype,e&&e.prototype),e&&C(t,e)}(e,t),e}(o.Component);function A(t){this.name="Error",this.status=t.status,this.message=t.statusText,this.url=t.url}A.prototype=Object.create(Error.prototype),A.prototype.constructor=A;var I,H=localStorage.getItem("ghtoken"),x=(I={method:"GET",headers:{Authorization:"token ".concat(H)}},function(t){return function(){return fetch(function(t){return"".concat("https://api.github.com").concat(t)}(t),I).then(function(t){if(t.ok)return t.json();throw new A(t)})}}),D=x("/user"),G=x("/gists");function L(t){return(L="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function N(t,e){return(N=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Q(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function W(t,e){return!e||"object"!==L(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function q(t){return(q=Object.getPrototypeOf||function(t){return t.__proto__})(t)}var M=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),W(this,q(e).apply(this,arguments))}var n,o,i;return n=e,(o=[{key:"componentDidMount",value:function(){this.props.onFetchData()}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("button",{onClick:this.props.onFetchData},"sync"))}}])&&Q(n.prototype,o),i&&Q(n,i),function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");N(t.prototype,e&&e.prototype),e&&N(t,e)}(e,t),e}(o.Component),z=Object(a.b)(null,function(t){return{onFetchData:function(){!function(t){t({type:"FETCH_USER_REQUEST"}),D().then(function(e){return t({type:"FETCH_USER_SUCCESS",payload:e})}).catch(function(e){return t(function(t){return{type:"FETCH_USER_FAILURE",payload:t}}(e))})}(t),function(t){t({type:"FETCH_GISTS_REQUEST"}),G().then(function(e){return t({type:"FETCH_GISTS_SUCCESS",payload:e})}).catch(function(e){return t(function(t){return{type:"FETCH_GISTS_FAILURE",payload:t}}(e))})}(t)}}})(M);function B(t){return(B="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function J(t,e){return(J=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function X(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function V(t,e){return!e||"object"!==B(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function $(t){return($=Object.getPrototypeOf||function(t){return t.__proto__})(t)}var K=function(t){function e(){var t,n,o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var i=arguments.length,c=new Array(i),a=0;a<i;a++)c[a]=arguments[a];return V(o,(n=o=V(this,(t=$(e)).call.apply(t,[this].concat(c))),o.isAuthenticated=!1,o.chooseStartPage=function(t){return o.isAuthenticated?r.a.createElement(O,null):(console.log("should redirect"),r.a.createElement(O,null))},n))}var n,o,i;return n=e,(o=[{key:"render",value:function(){return r.a.createElement(f.a,null,r.a.createElement("div",{className:"app"},r.a.createElement("header",null,r.a.createElement("nav",null,r.a.createElement(l.a,{to:"/"},"home"),r.a.createElement(l.a,{to:"/gist"},"gist"),r.a.createElement(l.a,{to:"/login"},"login")),r.a.createElement(z,null)),r.a.createElement("aside",null,r.a.createElement(m,null)),r.a.createElement("main",null,r.a.createElement(u.a,{exact:!0,path:"/",render:this.chooseStartPage}),r.a.createElement(u.a,{exact:!0,path:"/login",component:F}),r.a.createElement(u.a,{exact:!0,path:"/gist",component:O})),r.a.createElement("footer",null,"footer")))}}])&&X(n.prototype,o),i&&X(n,i),function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");J(t.prototype,e&&e.prototype),e&&J(t,e)}(e,t),e}(o.Component),Y=(n(27),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)));function Z(t){navigator.serviceWorker.register(t).then(function(t){t.onupdatefound=function(){var e=t.installing;e.onstatechange=function(){"installed"===e.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(t){console.error("Error during service worker registration:",t)})}var tt=n(6),et=n(11),nt=n(20),ot=n.n(nt),rt=n(19);function it(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},o=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),o.forEach(function(e){ct(t,e,n[e])})}return t}function ct(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var at={pending:!1,data:{},error:""};function ut(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},o=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),o.forEach(function(e){lt(t,e,n[e])})}return t}function lt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var ft={pending:!1,data:{},error:""},st=Object(tt.c)({gists:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:at,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"FETCH_GISTS_REQUEST":return it({},t,{pending:!0});case"FETCH_GISTS_SUCCESS":return it({},t,{pending:!1,data:e.payload,error:at.error});case"FETCH_GISTS_FAILURE":return it({},t,{pending:!1,data:at.data,error:e.payload});default:return t}},user:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ft,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"FETCH_USER_REQUEST":return ut({},t,{pending:!0});case"FETCH_USER_SUCCESS":return ut({},t,{pending:!1,data:e.payload,error:ft.error});case"FETCH_USER_FAILURE":return ut({},t,{pending:!1,data:ft.data,error:e.payload});default:return t}}}),pt={key:"root",storage:ot.a},yt=Object(et.a)(pt,st),ht=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||tt.d,bt=Object(tt.e)(yt,ht(Object(tt.a)(rt.a)));Object(et.b)(bt);c.a.render(r.a.createElement(a.a,{store:bt},r.a.createElement(K,null)),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/gist",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("/gist","/service-worker.js");Y?(function(t){fetch(t).then(function(e){404===e.status||-1===e.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(t){t.unregister().then(function(){window.location.reload()})}):Z(t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):Z(t)})}}()},27:function(t,e,n){},46:function(t,e,n){n(45),t.exports=n(25)}},[[46,0,1]]]);
//# sourceMappingURL=main.685d9fae.chunk.js.map