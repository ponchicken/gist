(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{23:function(t,e,n){"use strict";n.r(e);var o=n(0),r=n.n(o),i=n(22),c=n.n(i),a=n(6),u=n(5),l=n(19);function f(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},o=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),o.forEach(function(e){s(t,e,n[e])})}return t}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var p={pending:!1,data:{},error:""};function y(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},o=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),o.forEach(function(e){h(t,e,n[e])})}return t}function h(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var b={pending:!1,data:{},error:""},d=Object(a.c)({gists:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"FETCH_GISTS_REQUEST":return f({},t,{pending:!0});case"FETCH_GISTS_SUCCESS":return f({},t,{pending:!1,data:e.payload,error:p.error});case"FETCH_GISTS_FAILURE":return f({},t,{pending:!1,data:p.data,error:e.payload});default:return t}},user:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"FETCH_USER_REQUEST":return y({},t,{pending:!0});case"FETCH_USER_SUCCESS":return y({},t,{pending:!1,data:e.payload,error:b.error});case"FETCH_USER_FAILURE":return y({},t,{pending:!1,data:b.data,error:e.payload});default:return t}}}),m=n(12),g=n(13),v=n(45);function E(t){return(E="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function w(t,e){return(w=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function S(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function _(t,e){return!e||"object"!==E(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function O(t){return(O=Object.getPrototypeOf||function(t){return t.__proto__})(t)}var j=function(t){function e(){var t,n,o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var i=arguments.length,c=new Array(i),a=0;a<i;a++)c[a]=arguments[a];return _(o,(n=o=_(this,(t=O(e)).call.apply(t,[this].concat(c))),o.displayGists=function(){var t=o.props.gists.data;return t.length?t.map(function(t){return r.a.createElement("a",{href:t.url,key:t.id},t.description)}):r.a.createElement("div",null,"no gists")},n))}var n,o,i;return n=e,(o=[{key:"render",value:function(){return r.a.createElement("div",{className:"gists-list"},this.displayGists())}}])&&S(n.prototype,o),i&&S(n,i),function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");w(t.prototype,e&&e.prototype),e&&w(t,e)}(e,t),e}(o.Component),T=Object(u.b)(function(t){return{gists:t.gists}},function(t){return{}})(j);function k(t){return(k="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function C(t,e){return(C=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function P(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function R(t,e){return!e||"object"!==k(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function U(t){return(U=Object.getPrototypeOf||function(t){return t.__proto__})(t)}var F=function(t){function e(){var t,n,o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return R(o,(n=o=R(this,(t=U(e)).call.apply(t,[this].concat(i))),o.displayGists=function(t){t.preventDefault()},n))}var n,o,i;return n=e,(o=[{key:"render",value:function(){return r.a.createElement("div",null,"no gist")}}])&&P(n.prototype,o),i&&P(n,i),function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");C(t.prototype,e&&e.prototype),e&&C(t,e)}(e,t),e}(o.Component),A=Object(u.b)()(F),I=n(9),H=n.n(I);function x(t){return(x="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function D(t,e){return(D=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function G(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function L(t,e){return!e||"object"!==x(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function N(t){return(N=Object.getPrototypeOf||function(t){return t.__proto__})(t)}var Q=function(t){function e(){var t,n,o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return L(o,(n=o=L(this,(t=N(e)).call.apply(t,[this].concat(i))),o.requestAccess=function(){var t=H.a.parse(window.location.search),e=H.a.stringify({code:t.code}),n="http://localhost:3000/callback?".concat(e);fetch(n).then(function(t){return t.json()}).then(function(t){console.log(t);var e=t.token,n=e.access_token;e.error?console.log(t.token.error_description):localStorage.setItem("ghtoken",n)})},n))}var n,o,i;return n=e,(o=[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var t=H.a.stringify({client_id:"169a193bbe75c0e129d0",scope:"gist"}),e="https://github.com//login/oauth/authorize?".concat(t);return r.a.createElement("div",null,"login",r.a.createElement("a",{href:e},"to github"),r.a.createElement("button",{onClick:this.requestAccess},"request access"))}}])&&G(n.prototype,o),i&&G(n,i),function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");D(t.prototype,e&&e.prototype),e&&D(t,e)}(e,t),e}(o.Component);function W(t){this.name="Error",this.status=t.status,this.message=t.statusText,this.url=t.url}W.prototype=Object.create(Error.prototype),W.prototype.constructor=W;var q,M=localStorage.getItem("ghtoken"),z=(q={method:"GET",headers:{Authorization:"token ".concat(M)}},function(t){return function(){return fetch(function(t){return"".concat("https://api.github.com").concat(t)}(t),q).then(function(t){if(t.ok)return t.json();throw new W(t)})}}),B=z("/user"),J=z("/gists");function X(t){return(X="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function V(t,e){return(V=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function $(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function K(t,e){return!e||"object"!==X(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Y(t){return(Y=Object.getPrototypeOf||function(t){return t.__proto__})(t)}var Z=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),K(this,Y(e).apply(this,arguments))}var n,o,i;return n=e,(o=[{key:"componentDidMount",value:function(){this.props.onFetchData()}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("button",{onClick:this.props.onFetchData},"sync"))}}])&&$(n.prototype,o),i&&$(n,i),function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");V(t.prototype,e&&e.prototype),e&&V(t,e)}(e,t),e}(o.Component),tt=Object(u.b)(null,function(t){return{onFetchData:function(){!function(t){t({type:"FETCH_USER_REQUEST"}),B().then(function(e){return t({type:"FETCH_USER_SUCCESS",payload:e})}).catch(function(e){return t(function(t){return{type:"FETCH_USER_FAILURE",payload:t}}(e))})}(t),function(t){t({type:"FETCH_GISTS_REQUEST"}),J().then(function(e){return t({type:"FETCH_GISTS_SUCCESS",payload:e})}).catch(function(e){return t(function(t){return{type:"FETCH_GISTS_FAILURE",payload:t}}(e))})}(t)}}})(Z);function et(t){return(et="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function nt(t,e){return(nt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ot(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function rt(t,e){return!e||"object"!==et(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function it(t){return(it=Object.getPrototypeOf||function(t){return t.__proto__})(t)}var ct=function(t){function e(){var t,n,o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var i=arguments.length,c=new Array(i),a=0;a<i;a++)c[a]=arguments[a];return rt(o,(n=o=rt(this,(t=it(e)).call.apply(t,[this].concat(c))),o.isAuthenticated=!1,o.chooseStartPage=function(t){return o.isAuthenticated?r.a.createElement(A,null):(console.log("should redirect"),r.a.createElement(A,null))},n))}var n,o,i;return n=e,(o=[{key:"render",value:function(){return r.a.createElement(v.a,null,r.a.createElement("div",{className:"app"},r.a.createElement("header",null,r.a.createElement("nav",null,r.a.createElement(g.a,{to:"/"},"home"),r.a.createElement(g.a,{to:"/gist"},"gist"),r.a.createElement(g.a,{to:"/login"},"login")),r.a.createElement(tt,null)),r.a.createElement("aside",null,r.a.createElement(T,null)),r.a.createElement("main",null,r.a.createElement(m.a,{exact:!0,path:"/",render:this.chooseStartPage}),r.a.createElement(m.a,{exact:!0,path:"/login",component:Q}),r.a.createElement(m.a,{exact:!0,path:"/gist",component:A})),r.a.createElement("footer",null,"footer")))}}])&&ot(n.prototype,o),i&&ot(n,i),function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");nt(t.prototype,e&&e.prototype),e&&nt(t,e)}(e,t),e}(o.Component),at=(n(25),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)));function ut(t){navigator.serviceWorker.register(t).then(function(t){t.onupdatefound=function(){var e=t.installing;e.onstatechange=function(){"installed"===e.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(t){console.error("Error during service worker registration:",t)})}var lt=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||a.d,ft=Object(a.e)(d,lt(Object(a.a)(l.a)));c.a.render(r.a.createElement(u.a,{store:ft},r.a.createElement(ct,null)),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/gist",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("/gist","/service-worker.js");at?(function(t){fetch(t).then(function(e){404===e.status||-1===e.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(t){t.unregister().then(function(){window.location.reload()})}):ut(t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):ut(t)})}}()},25:function(t,e,n){},44:function(t,e,n){n(43),t.exports=n(23)}},[[44,0,1]]]);
//# sourceMappingURL=main.c432e7f7.chunk.js.map