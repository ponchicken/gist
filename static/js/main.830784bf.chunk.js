(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{25:function(t,n,e){"use strict";e.r(n);var r=e(0),o=e.n(r),i=e(24),a=e.n(i),c=e(4),u=e(21),l=e(49),f=e(50),s=function(t){return function(n){n({type:"FETCH_GIST_FILE_REQUEST",payload:{name:t.file.filename,id:t.id}}),fetch(t.file.raw_url).then(function(t){return t.text()}).then(function(e){n(function(t){return{type:"FETCH_GIST_FILE_SUCCESS",payload:t}}({id:t.id,name:t.file.filename,data:e}))}).catch(function(t){return n(function(t){return{type:"FETCH_GIST_FILE_FAILURE",payload:t}}(t))})}},p=function(t){var n=t.search("]"),e=-1!==n?t.slice(1,n):t.slice(0,t.length),r=-1!==n?t.slice(n+1,t.length):t.slice(0,t.length),o=t.match(/#[\w\-_]*/g);return{title:e.trim(),description:r.trim(),tags:o}};function d(t){return(d="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function y(t,n){return(y=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}function h(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function g(t,n){return!n||"object"!==d(n)&&"function"!==typeof n?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):n}function b(t){return(b=Object.getPrototypeOf||function(t){return t.__proto__})(t)}var m=function(t){function n(){var t,e,r;!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n);for(var i=arguments.length,a=new Array(i),c=0;c<i;c++)a[c]=arguments[c];return g(r,(e=r=g(this,(t=b(n)).call.apply(t,[this].concat(a))),r.displayGists=function(){var t=r.props.gists.data;return t.length?t.map(function(t){var n=p(t.description);return o.a.createElement("button",{onClick:r.props.setGist(t.id),key:t.id,className:r.chooseGistClass(t)},n.title)}):o.a.createElement("div",null,"no gists")},e))}var e,r,i;return e=n,(r=[{key:"chooseGistClass",value:function(t){var n="";return n+=t.id===this.props.gists.active?"active ":"",n+=t.changed?"changed ":""}},{key:"render",value:function(){return o.a.createElement("div",{className:"gists-list"},this.displayGists())}}])&&h(e.prototype,r),i&&h(e,i),function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");y(t.prototype,n&&n.prototype),n&&y(t,n)}(n,t),n}(r.Component),E=Object(c.b)(function(t){return{gists:t.gists}},function(t){return{setGist:function(n){return function(e){e.preventDefault(),t(function(t){return{type:"SET_ACTIVE_GIST",payload:t}}(n))}},loadGistFiles:function(t){}}})(m),v=e(20),_=e.n(v),S=e(10),w=e.n(S),T=function(t){var n=t.gist,e=t.updateGist,r=t.changeFileData,i=t.getFileData,a=t.fileAdd;return o.a.createElement("div",{className:"gist"},o.a.createElement("h3",null,n.description),o.a.createElement("div",null,Object.keys(n.files).map(function(t){return function(t){var e=n.files[t],a=e.language?e.language.toLowerCase():"clike",c=w.a.languages.hasOwnProperty(a)?a:"clike",u=i(t)||"";return o.a.createElement("div",{key:t,className:"gist-file"},o.a.createElement("h3",null,t),o.a.createElement(_.a,{className:"gist-editor",value:u,onValueChange:r(t),highlight:function(t){return w.a.highlight(t,w.a.languages[c])},padding:10,style:{fontFamily:'"Fira code", "Fira Mono", monospace',fontSize:14}}))}(t)})),o.a.createElement("div",{className:"gist-actions"},o.a.createElement("button",{className:"btn",onClick:function(t){return function(n){console.log("Adding file"),a(t)}}(n)},"Add file"),o.a.createElement("button",{className:"btn gist-submit",onClick:e(n)},"Submit")))};function O(t){return(O="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function C(t,n){return(C=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}function F(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function k(t,n){return!n||"object"!==O(n)&&"function"!==typeof n?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):n}function j(t){return(j=Object.getPrototypeOf||function(t){return t.__proto__})(t)}var I=function(t){function n(t){var e;return function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n),(e=k(this,j(n).call(this,t))).displayGist=function(){var t=e.props.gists;return t.active?(e.gist=t.data.find(function(n){return n.id===t.active}),o.a.createElement(T,{gist:e.gist,updateGist:e.props.onUpdateGist,changeFileData:e.changeFileData,changeCode:e.changeCode,getFileData:e.getFileData,fileAdd:e.props.onFileAdd})):"no active gist"},e.getFileData=function(t){return e.gist.files[t].content},e.changeFileData=function(t){return function(n){e.setState({code:n}),e.gist.files[t].content=n}},e.handleKeyboard=function(t){if(t.ctrlKey||t.metaKey)switch(String.fromCharCode(t.which).toLowerCase()){case"s":e.gist&&e.props.onUpdateGist(e.gist)(t)}},e.state={code:""},e}var e,r,i;return e=n,(r=[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeyboard)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKeyboard)}},{key:"render",value:function(){return o.a.createElement("div",null,this.displayGist())}}])&&F(e.prototype,r),i&&F(e,i),function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");C(t.prototype,n&&n.prototype),n&&C(t,n)}(n,t),n}(r.Component),G=Object(c.b)(function(t){return{gists:t.gists}},function(t){return{loadFile:function(n){return function(e){t(s(n))}},onUpdateGist:function(n){return function(e){e&&e.preventDefault(),t(function(t){return{type:"CHANGE_GIST",payload:t}}(n))}},onFileAdd:function(n){t(function(t){return{type:"FILE_ADD",payload:t}}(n))}}})(I),U=e(9),P=e.n(U),R=function(){var t=window.location.origin+window.location.pathname,n=P.a.stringify({client_id:"169a193bbe75c0e129d0",scope:"gist",redirect_uri:t}),e="https://github.com/login/oauth/authorize?".concat(n);window.location.href=e},A=function(t){return"".concat("https://api.github.com").concat(t)},H=function(){return{Authorization:"token ".concat(localStorage.getItem("ghtoken"))}},D=function(t){if(t.ok)return t.json();throw new N(t)};function N(t){this.name="Error",this.status=t.status,this.message=t.statusText,this.url=t.url}N.prototype=Object.create(Error.prototype),N.prototype.constructor=N;var L,x=(L="GET",function(t){return function(n){return n=n||A(t),fetch(n,{method:L,headers:H()}).then(D)}}),K=x("/user"),Q=x("/gists"),W=function(t){t({type:"FETCH_USER_REQUEST"}),K().then(function(n){return t({type:"FETCH_USER_SUCCESS",payload:n})}).catch(function(n){return t(function(t){return{type:"FETCH_USER_FAILURE",payload:t}}(n))})},M=function(t){return function(n){return function(e){return fetch(A(n),{method:t,headers:H(),body:JSON.stringify(e)}).then(D)}}}("PATCH"),V=function(t){t({type:"FETCH_GISTS_REQUEST"}),Q().then(function(n){t(function(t){return{type:"FETCH_GISTS_SUCCESS",payload:t}}(n)),t(z(n))}).catch(function(n){return console.log(n),t(function(t){return{type:"FETCH_GISTS_FAILURE",payload:t}}(n))})},z=function(t){return function(n){t.forEach(function(t){n(function(t){return function(n){Object.keys(t.files).forEach(function(e){n(s({id:t.id,file:t.files[e]}))})}}(t))})}},J=function(t){return function(n){var e=t.data.filter(function(t){return t.changed});return e.forEach(function(t){n({type:"UPDATE_GISTS_START"}),function(t){return M("/gists/".concat(t.id))(t)}(t).then(function(t){n(function(t){return{type:"UPDATE_GIST_SUCCESS",payload:t}}(t))}).catch(function(t){n({type:"UPDATE_GIST_ERROR",payload:t})}).finally(function(t){n({type:"UPDATE_GISTS_FINISH"})})}),e}};function B(t){return(B="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function X(t,n){return(X=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}function $(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function q(t,n){return!n||"object"!==B(n)&&"function"!==typeof n?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):n}function Y(t){return(Y=Object.getPrototypeOf||function(t){return t.__proto__})(t)}var Z=function(t){function n(){var t,e,r;!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return q(r,(e=r=q(this,(t=Y(n)).call.apply(t,[this].concat(i))),r.loading=function(){if(r.props.login.pending)return"loading..."},e))}var e,r,i;return e=n,(r=[{key:"componentDidMount",value:function(){var t=this.props,n=t.login,e=t.onFetchToken;n.isAuth||e()}},{key:"render",value:function(){var t=this.props.user.data;return o.a.createElement("div",{className:"header-user"},o.a.createElement("a",{href:t.html_url,className:"header-user-name"},o.a.createElement("img",{src:t.avatar_url,alt:"",className:"header-user-img"}),t.login),this.loading(),o.a.createElement("button",{className:"btn",onClick:R},"Login"),o.a.createElement("button",{className:"btn",onClick:this.props.onLogout},"Logout"))}}])&&$(e.prototype,r),i&&$(e,i),function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");X(t.prototype,n&&n.prototype),n&&X(t,n)}(n,t),n}(r.Component),tt=Object(c.b)(function(t){return{login:t.login,user:t.user}},function(t){return{onFetchToken:function(){(function(t){var n=P.a.parse(window.location.search);if(n.code){var e=P.a.stringify({code:n.code}),r="https://server-aenjidvwww.now.sh/callback?".concat(e);return t({type:"FETCH_GH_TOKEN_REQUEST"}),fetch(r).then(function(t){return t.json()}).then(function(n){var e=n.token,r=e.access_token,o=e.error;o?t(function(t){return{type:"FETCH_GH_TOKEN_ERROR",payload:t,error:!0}}(o)):(localStorage.setItem("ghtoken",r),t({type:"FETCH_GH_TOKEN_SUCCESS",payload:r}))})}})(t).then(function(n){W(t),V(t)})},onLogout:function(){t((localStorage.removeItem("ghtoken"),{type:"LOGOUT"}))},onFetchData:function(){W(t),V(t)}}})(Z);function nt(t){return(nt="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function et(t,n){return(et=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}function rt(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ot(t,n){return!n||"object"!==nt(n)&&"function"!==typeof n?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):n}function it(t){return(it=Object.getPrototypeOf||function(t){return t.__proto__})(t)}var at=function(t){function n(){return function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n),ot(this,it(n).apply(this,arguments))}var e,r,i;return e=n,(r=[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return o.a.createElement("div",{className:"sync"},o.a.createElement("button",{className:"btn",onClick:this.props.onFetchData},"pull"),o.a.createElement("button",{className:"btn",onClick:this.props.onUpdateGists(this.props.gists)},"push"),o.a.createElement("div",{className:"status"},this.props.gists.patching?"pushing github":""))}}])&&rt(e.prototype,r),i&&rt(e,i),function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");et(t.prototype,n&&n.prototype),n&&et(t,n)}(n,t),n}(r.Component),ct=Object(c.b)(function(t){return{gists:t.gists}},function(t){return{onFetchData:function(){W(t),V(t)},onUpdateGists:function(n){return function(){t(J(n))}}}})(at);function ut(t){return(ut="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function lt(t,n){return(lt=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}function ft(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function st(t,n){return!n||"object"!==ut(n)&&"function"!==typeof n?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):n}function pt(t){return(pt=Object.getPrototypeOf||function(t){return t.__proto__})(t)}var dt=function(t){function n(){var t,e,r;!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return st(r,(e=r=st(this,(t=pt(n)).call.apply(t,[this].concat(i))),r.isAuthenticated=!1,e))}var e,r,i;return e=n,(r=[{key:"render",value:function(){return o.a.createElement(f.a,{basename:"/gist"},o.a.createElement("div",{className:"app"},o.a.createElement("header",{className:"header"},o.a.createElement(ct,null),o.a.createElement(tt,null)),o.a.createElement("aside",null,o.a.createElement(E,null)),o.a.createElement("main",null,o.a.createElement(l.a,{exact:!0,path:"/",component:G})),o.a.createElement("footer",null,"footer")))}}])&&ft(e.prototype,r),i&&ft(e,i),function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");lt(t.prototype,n&&n.prototype),n&&lt(t,n)}(n,t),n}(r.Component),yt=(e(29),e(27),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)));function ht(t){navigator.serviceWorker.register(t).then(function(t){t.onupdatefound=function(){var n=t.installing;n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(t){console.error("Error during service worker registration:",t)})}var gt=e(6),bt=e(11),mt=e(18),Et=e.n(mt),vt=e(17);function _t(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{},r=Object.keys(e);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(e).filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.forEach(function(n){St(t,n,e[n])})}return t}function St(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}var wt;function Tt(t,n){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t,r=arguments.length>1?arguments[1]:void 0;return n.hasOwnProperty(r.type)?n[r.type](e,r):e}}function Ot(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{},r=Object.keys(e);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(e).filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.forEach(function(n){Ct(t,n,e[n])})}return t}function Ct(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}var Ft={pending:!1,data:{},error:""},kt=Tt(Ft,(Ct(wt={},"FETCH_GISTS_REQUEST",function(t){return Ot({},t,{pending:!0})}),Ct(wt,"FETCH_GISTS_SUCCESS",function(t,n){return Ot({},t,{pending:!1,data:n.payload,error:Ft.error})}),Ct(wt,"FETCH_GISTS_FAILURE",function(t,n){return Ot({},t,{pending:!1,error:n.payload})}),Ct(wt,"SET_ACTIVE_GIST",function(t,n){return _t({},t,{active:n.payload})}),Ct(wt,"FETCH_GIST_FILE_REQUEST",function(t,n){var e=n.payload,r=e.name,o=e.id,i=_t({},t),a=i.data.findIndex(function(t){return t.id===o});return i.data[a].files[r].pending=!0,i}),Ct(wt,"FETCH_GIST_FILE_SUCCESS",function(t,n){var e=n.payload,r=e.id,o=e.name,i=e.data,a=_t({},t),c=a.data.findIndex(function(t){return t.id===r}),u=a.data[c].files[o];return u.pending=!1,u.content=i,a}),Ct(wt,"FETCH_GIST_FILE_FAILURE",function(t,n){return t}),Ct(wt,"CHANGE_GIST",function(t,n){var e=_t({},t),r=n.payload;r.changed=!0;var o=t.data.findIndex(function(t){return t.id===r.id});return e.data[o]=r,e}),Ct(wt,"UPDATE_GISTS_START",function(t){return Ot({},t,{patching:!0})}),Ct(wt,"UPDATE_GISTS_FINISH",function(t){return Ot({},t,{patching:!1})}),Ct(wt,"UPDATE_GIST_SUCCESS",function(t,n){var e=_t({},t),r=n.payload;r.changed=!1;var o=t.data.findIndex(function(t){return t.id===r.id});return e.data[o]=r,e}),Ct(wt,"UPDATE_GIST_ERROR",function(t,n){var e=_t({},t),r=n.payload;r.changed=!1;var o=t.data.findIndex(function(t){return t.id===r.id});return e.data[o]=r,e}),Ct(wt,"FILE_ADD",function(t,n){console.log("reducer",n.payload);var e=_t({},t),r=n.payload;r.files.new={filename:"new",content:""};var o=t.data.findIndex(function(t){return t.id===r.id});return e.data[o]=r,e}),wt));function jt(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{},r=Object.keys(e);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(e).filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.forEach(function(n){It(t,n,e[n])})}return t}function It(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}var Gt,Ut={pending:!1,data:{},error:""};function Pt(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{},r=Object.keys(e);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(e).filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.forEach(function(n){Rt(t,n,e[n])})}return t}function Rt(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}var At={pending:!1,token:"",error:{},isAuth:!1},Ht=Tt(At,(Rt(Gt={},"FETCH_GH_TOKEN_REQUEST",function(t){return Pt({},t,{pending:!0})}),Rt(Gt,"FETCH_GH_TOKEN_SUCCESS",function(t,n){return{pending:!1,token:n.payload,error:At.error,isAuth:!0}}),Rt(Gt,"FETCH_GH_TOKEN_ERROR",function(t,n){return Pt({},t,{pending:!1,error:n.payload})}),Rt(Gt,"LOGOUT",function(t){return Pt({},t,{token:At.token,isAuth:!1})}),Gt)),Dt=Object(gt.c)({gists:kt,user:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ut,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"FETCH_USER_REQUEST":return jt({},t,{pending:!0});case"FETCH_USER_SUCCESS":return jt({},t,{pending:!1,data:n.payload,error:Ut.error});case"FETCH_USER_FAILURE":return jt({},t,{pending:!1,data:Ut.data,error:n.payload});default:return t}},login:Ht}),Nt={key:"root",storage:Et.a},Lt=Object(bt.a)(Nt,Dt),xt=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||gt.d,Kt=Object(gt.e)(Lt,xt(Object(gt.a)(vt.a))),Qt=Object(bt.b)(Kt);a.a.render(o.a.createElement(c.a,{store:Kt},o.a.createElement(u.a,{loading:null,persistor:Qt},o.a.createElement(dt,null))),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/gist",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("/gist","/service-worker.js");yt?(function(t){fetch(t).then(function(n){404===n.status||-1===n.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(t){t.unregister().then(function(){window.location.reload()})}):ht(t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):ht(t)})}}()},29:function(t,n,e){},48:function(t,n,e){e(47),t.exports=e(25)}},[[48,0,1]]]);
//# sourceMappingURL=main.830784bf.chunk.js.map